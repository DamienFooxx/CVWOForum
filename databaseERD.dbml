Table users {
  user_id int [pk, not null]
  user_name varchar [unique, not null]
  created_at timestamp [not null]
  bio text [null]
}

Table topics {
  topic_id int [pk, not null]
  created_by int [not null, ref: > users.user_id]
  name varchar [unique, not null]
  description text [not null]
  created_at timestamp [not null]
  updated_at timestamp [null]

  // moderation / soft-delete-ish fields
  status varchar [null]           // constrained in app/DB check: active/locked/removed
  removed_at timestamp [null]
  removed_by int [null, ref: > users.user_id]
  removal_reason text [null]
}

Table posts {
  post_id int [pk, not null]
  topic_id int [not null, ref: > topics.topic_id]
  created_by int [not null, ref: > users.user_id]
  title varchar [not null]
  body text [not null]
  created_at timestamp [not null]
  edited_at timestamp [null]

  status varchar [not null]       // constrained: active/locked/removed
  removed_at timestamp [null]
  removed_by int [null, ref: > users.user_id]
  removal_reason text [null]

  Indexes {
    (topic_id, created_at) [name: "idx_posts_topic_created_at_desc"] // add DESC in SQL
  }
}

Table comments {
  comment_id int [pk, not null]
  post_id int [not null, ref: > posts.post_id]
  commented_by int [not null, ref: > users.user_id]
  body text [not null]
  created_at timestamp [not null]
  edited_at timestamp [null]

  status varchar [null]           // constrained: active/removed
  removed_at timestamp [null]
  removed_by int [null, ref: > users.user_id]
  removal_reason text [null]

  Indexes {
    (post_id, created_at) [name: "idx_comments_post_created_at_asc"] // add ASC in SQL
  }
}

Table follows_topic {
  topic_id int [not null, ref: > topics.topic_id]
  user_id int [not null, ref: > users.user_id]
  followed_at timestamp [not null]

  Indexes {
    (user_id, topic_id) [unique, name: "pk_follows_topic"]
  }
}

Table reaction_types {
  rxnType_id int [pk, not null]
  key varchar [unique, not null] // like, dislike, laugh, insightful, angry
}

Table reactions {
  reaction_id int [pk, not null]
  user_id int [not null, ref: > users.user_id]
  reaction_type int [not null, ref: > reaction_types.rxnType_id]
}

Table post_reactions {
  reaction_id int [not null, ref: > reactions.reaction_id]
  post_id int [not null, ref: > posts.post_id]

  // Note: your ERD says UNIQUE(user_id, post_id, reaction_type_id).
  // That uniqueness is not enforceable using only reaction_id+post_id without extra columns or triggers.
  Indexes {
    (reaction_id) [unique, name: "pk_post_reactions_reaction_id"]
  }
}

Table comment_reactions {
  reaction_id int [not null, ref: > reactions.reaction_id]
  comment_id int [not null, ref: > comments.comment_id]

  Indexes {
    (reaction_id) [unique, name: "pk_comment_reactions_reaction_id"]
  }
}

Table post_revisions {
  postRevision_id int [pk, not null]
  post_id int [not null, ref: > posts.post_id]
  edited_by int [not null, ref: > users.user_id]
  title_snapshot varchar [not null]
  body_snapshot text [not null]
  created_at timestamp [not null]
}

Table comment_revisions {
  commentRevision_id int [pk, not null]
  comment_id int [not null, ref: > comments.comment_id]
  edited_by int [not null, ref: > users.user_id]
  body_snapshot text [not null]
  created_at timestamp [not null]
}

Table notifications {
  notif_id int [pk, not null]
  user_id int [not null, ref: > users.user_id]
  type varchar [not null]         // constrained by app (or DB check)
  payload_json json [not null]
  is_read boolean [not null]
  created_at timestamp [not null]
}

Table user_bans {
  ban_id int [pk, not null]
  banned_user_id int [not null, ref: > users.user_id]
  baned_by_admin int [not null, ref: > users.user_id]
  reason text [not null]
  created_at timestamp [not null]
  expires_at timestamp [null]
  lifted_at timestamp [null]
  lifted_by int [null, ref: > users.user_id]
}

Table content_reports {
  report_id int [pk, not null]
  reporter_id int [not null, ref: > users.user_id]

  // Polymorphic target
  target_type varchar [not null]  // post|comment|topic
  target_id int [not null]

  category varchar [not null]     // hateful|spam|harassment|...
  details text [not null]
  status varchar [not null]       // open|in_review|resolved|rejected
  created_at timestamp [not null]
  resolved_at timestamp [null]
  resolved_by int [null, ref: > users.user_id]
}

Table moderation_actions {
  moderation_id int [pk, not null]
  admin_id int [not null, ref: > users.user_id]

  action_type varchar [not null]  // edit_post|remove_post|lock_topic|ban_user|...
  target_type varchar [not null]  // post|comment|topic|user
  target_id int [not null]        // polymorphic

  reason text [not null]
  metadata_json json [null]
  created_at timestamp [not null]
}
